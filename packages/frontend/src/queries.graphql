query WatchAllUnions @live {
  unions(first: 50) {
    ...UnionDetail
  }
  _meta {
    block {
      hash
    }
  }
}

query FetchAllUnions {
  unions(first: 50) {
    ...UnionDetail
  }
  _meta {
    block {
      hash
    }
  }
}

query UnionDetails($id: ID!) {
  union(id: $id) {
    ...UnionDetail
    pendingApplications(where: { approved: false }) {
      ...ApplicationDetail
    }
    proposals {
      ...ProposalDetail
    }
  }
}

query WatchUnionDetails($id: ID!) @live {
  union(id: $id) {
    ...UnionDetail
    proposals {
      ...ProposalDetail
    }
  }
}

fragment ProposalDetail on Proposal {
  id
  numOptions
  metadata
  options {
    ...ProposalOptionDetail
  }
}

fragment ProposalOptionDetail on ProposalOption {
  id
  votes
}

query UnionMembers($id: ID!) {
  union(id: $id) {
    id
    users {
      id
      isAdmin
      user {
        ...UserDetail
      }
    }
  }
}

query WatchForProposalCreation($id: ID!) @live {
  proposal(id: $id) {
    id
  }
  _meta {
    block {
      hash
    }
  }
}

query ProposalDetails($id: ID!) {
  proposal(id: $id) {
    id
    numOptions
    metadata
    union {
      votingAddress
    }
    options {
      id
      votes
    }
  }
}

query IsUserAdminOfUnion($id: ID!, $unionId: Bytes!) {
  user(id: $id) {
    id
    roles(where: { isAdmin: true, union_: { id: $unionId } }) {
      union {
        id
      }
    }
  }
}

query GetUserUnions($id: ID!) {
  user(id: $id) {
    id
    metadata
    roles {
      union {
        id
        metadata
      }
    }
  }
}

fragment UserDetail on User {
  id
  metadata
}

fragment UnionDetail on Union {
  id
  metadata
  owner {
    id
    metadata
  }
}

fragment ApplicationDetail on Application {
  id
  user {
    id
    metadata
  }
  approved
}
