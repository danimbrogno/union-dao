type Union @entity {
  id: Bytes!
  metadata: String!
  owner: User!
  votingAddress: Bytes!
  pendingApplications: [Application!]! @derivedFrom(field: "union")
  users: [UserRole!]! @derivedFrom(field: "union")
  proposals: [Proposal!]! @derivedFrom(field: "union")
}

type Application @entity {
  id: Bytes!
  union: Union!
  user: User!
  approved: Boolean!
}

type UserRole @entity {
  id: Bytes!
  union: Union!
  user: User!
  isMember: Boolean!
  isAdmin: Boolean!
}

type User @entity {
  id: Bytes!
  metadata: String
  roles: [UserRole!]! @derivedFrom(field: "user")
  proposals: [Proposal!]! @derivedFrom(field: "owner")
  unions: [Union!]! @derivedFrom(field: "owner")
}

type Proposal @entity {
  id: Bytes!
  union: Union!
  owner: User!
  numOptions: Int!
  metadata: String!
  options: [ProposalOption!]! @derivedFrom(field: "proposal")
}

type ProposalOption @entity {
  id: Bytes!
  proposal: Proposal!
  votes: Int!
}
